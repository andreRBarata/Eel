const command	= require('command');
const fs		= require('fs');

module.exports = command('cd <path>')
	.action(({_: [path]}, push) => {
		#realpath(path) |> #then(([abspath]) => {
			fs.stat(abspath, (err, stats) => {
				if (!err && stats.isDirectory()) {
					process.chdir(abspath);
				}
				else if (!stats.isDirectory()) {
					push(new Error('Path is not a directory'));
				}
				else {
					push(new Error('Path does not exist'));
				}

				push(null);
			});

		});
	});
